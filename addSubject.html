<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Add Subject</title>
    <link rel="stylesheet" href="style.css">
    <style>
        .form-container { background: white; padding: 40px; border-radius: 20px; box-shadow: 0 8px 32px rgba(0,0,0,0.15); max-width: 600px; margin: 20px auto; }
        .form-header h1 { color: #667eea; font-size: 32px; margin: 0 0 30px 0; }
        .form-grid { display: grid; grid-template-columns: 1fr 1fr; gap: 20px; }
        .full-width { grid-column: 1 / -1; }
        label { display: block; margin-bottom: 8px; color: #444; font-weight: 600; font-size: 14px; }
        input, select { width: 100%; padding: 12px 15px; border: 2px solid #e0e0e0; border-radius: 8px; font-size: 16px; box-sizing: border-box; transition: border-color 0.3s; }
        input:focus, select:focus { outline: none; border-color: #667eea; }
        button[type="submit"] { width: 100%; margin-top: 10px; grid-column: 1 / -1; }
    </style>
</head>

<body>
    <div class="form-container">
        <div class="form-header">
            <h1>ðŸ“š Add New Subject</h1>
        </div>

        <form id="addSubjectForm">
            <div class="form-grid">
                <div class="full-width">
                    <label for="subjectName">Subject Name</label>
                    <input type="text" id="subjectName" required placeholder="e.g., Theory of Computation">
                </div>
                <div>
                    <label for="courseCode">Course Code</label>
                    <input type="text" id="courseCode" required placeholder="e.g., CS-501">
                </div>
                <div>
                    <label for="branch">Branch</label>
                    <select id="branch" required>
                        <option value="" disabled selected>Select Branch</option>
                        <option value="cse">CSE</option>
                        <option value="ece">ECE</option>
                        <option value="mech">MECH</option>
                    </select>
                </div>
                <div>
                    <label for="semester">Semester</label>
                    <select id="semester" required>
                        <option value="" disabled selected>Select Semester</option>
                        <option value="1">I</option>
                        <option value="2">II</option>
                        <option value="3">III</option>
                        <option value="4">IV</option>
                        <option value="5">V</option>
                    </select>
                </div>
                <button type="submit">Add Subject</button>
            </div>
        </form>
    </div>

    <script>
        document.getElementById('addSubjectForm').addEventListener('submit', async function(e) {
            e.preventDefault();

            const subjectData = {
                name: document.getElementById('subjectName').value,
                course_code: document.getElementById('courseCode').value,
                branch: document.getElementById('branch').value,
                semester: document.getElementById('semester').value
            };

            try {
                const response = await fetch('http://localhost:5000/api/admin/subject', {
                    method: 'POST',
                    headers: { 'Content-Type': 'application/json' },
                    body: JSON.stringify(subjectData)
                });

                const result = await response.json();

                if (response.ok) {
                    alert('Subject Added Successfully!');
                    e.target.reset();
                } else {
                    alert(`Error: ${result.msg || 'An unknown error occurred.'}`);
                }
            } catch (error) {
                console.error('Failed to add subject:', error);
                alert('Could not connect to the server. Please ensure it is running.');
            }
        });
    </script>
</body>

</html>